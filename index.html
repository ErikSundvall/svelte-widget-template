<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Svelte Widget Demo</title>
</head>
<body>
  <h1>Svelte Widget Demo , intended for Better EHR Studio and form renderer</h1>
  <!-- Use the custom element -->
  <svelte-widget id="my-widget"></svelte-widget>

  <h1>Controls</h1>
  <div>
    <label>
      <input type="checkbox" id="toggle-button" checked>
      Show "reset" button inside widget
    </label>
  </div>
  <div>
    <label>
      Set inputData:
      <input type="text" id="input-data" value="Hello from outside!">
    </label>
    <button id="set-data">Set Data</button>
  </div>

  <h1>Output</h1>
  <p>This area will display messages (if any are available) from the widget:</p>
  <div id="output"></div>

  <script type="module">
    // Import the compiled web component
    import '/dist/SvelteWidget.js';

    // Listen for custom events from the widget
    const widget = document.getElementById('my-widget');
    widget.addEventListener('message', (e) => {
      document.getElementById('output').textContent =
        'Widget data: ' + JSON.stringify(e.detail.widgetData) +
        'event (e): ' + JSON.stringify(e);

      });

    // Controls
    const toggleButtonCheckbox = document.getElementById('toggle-button');
    toggleButtonCheckbox.addEventListener('change', (e) => {
      // The config prop is an object. We need to set the whole object.
      widget.config = { showButton: e.target.checked };
    });

    const inputDataField = document.getElementById('input-data');
    const setDataButton = document.getElementById('set-data');
    setDataButton.addEventListener('click', () => {
      widget.useDefaultData = false; // This will make the widget use inputData
      widget.inputData = inputDataField.value;
    });
  </script>
</body>
</html>